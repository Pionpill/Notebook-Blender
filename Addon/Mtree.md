<link rel=stylesheet href=style.css>

# Mtree 插件
## 1 Mtree 介绍
### 1.1 Modular_tree 开源项目
#### Modular_tree 项目
- Modular_tree 是一个免费的 Blender 插件，且到本文撰写过程中，持续更新
- Modular_tree 在 Github 上开源，遵循 GPL-3.0 协议, 仓库地址 [modular_tree](https://github.com/MaximeHerpin/modular_tree)
- 作者正在开发适应 Blender 新版的 v4 版本，但也将老版本用到 Blender 2.93 上，[解决方案](https://github.com/MaximeHerpin/modular_tree/pull/289)，本文便是依照这一版本撰写的
- [官方文档](https://github.com/MaximeHerpin/modular_tree/wiki/Documentation)版本较老，可能与本文有所区别

### 1.2 Modular_tree 使用
#### Modular_tree 启用
- 开启新的窗口，并启用 `节点化树木编辑器`
#### Modular_tree 工作流
- Modular_tree 使用节点化方式构建树模型，操作方式同材质

### 1.2 文档说明
#### 文档编写
- 本文档中文参考 万物有灵 翻译
- 本文档为作者自行测试后经验总结而成，并没有完全按照官方文档意思解读，主要是官方文档太老了
- 作者能力有限，并不能完全解读所有节点，如有错误请指正

## 2 Mtree 节点
### 2.1 Mtree 基本树节点
#### 树干节点
- 输入输出
  - 输入：无，树干是最基础的节点
  - 输出：树
- 可选项  
  - use_grease_pencil (使用蜡笔): 暂时不知道有什么用          
- 树干节点参数解析
  | 英文            | 中文      | 解释             | 备注                                       |
  | --------------- | --------- | ---------------- | ------------------------------------------ |
  | seed            | 随机种    | 制作随机数       | 值的向下取整如果一样，则只做细微变化       |
  | length          | 长度      | 影响树高         |                                            |
  | radius          | 半径      | 影响底部树围     |                                            |
  | end_radius      | 尾部_半径 | 影响顶部树围     | 代表相对 `radius` 的百分比半径             |
  | resolution      | 分辨率    | 影响树精度       | 数值小于1效果明显，大于1是和seed有相似效果 |
  | shape           | 形状      | 影响高度         | 可以达到类使树成长的效果                   |
  | randomness      | 随机性    | 影响卷曲程度     | 数值大时，树干会变得十分卷曲               |
  | axis_attraction | 轴重力    | 模拟树受重力影响 | 前提是 randomness 值不为0，即树不笔直      |

#### 树根节点
- 输入输出
  - 输入：树
  - 输出：树
- 根节点参数解析
  | 英文        | 中文     | 解释               | 备注                                         |
  | ----------- | -------- | ------------------ | -------------------------------------------- |
  | seed        | 随机种   | 制作随机数         | 与树干不同的是，只有整型值                   |
  | length      | 长度     | 影响树根系`复杂度` | 调整该选项，树根将自动分形，数值过大，会卡死 |
  | resolution  | 分辨率   | 缩放根部           | 缩放过程中也会自动分形                       |
  | split_proba | 分裂概率 | 影响根数量         |                                              |
  | randomness  | 随机性   | 影响卷曲程度       |                                              |

#### 树枝节点
- 输入输出
  - 输入：树
  - 输出：树
- 可选项  
  - advanced_settings (高级_设置): 提供更多参数   
  - can_spawn_leafs: 生成树叶   
- 树干节点参数解析
  | 英文             | 中文           | 解释                               | 备注       |
  | ---------------- | -------------- | ---------------------------------- | ---------- |
  | seed             | 随机种         | 制作随机数                         | 只有整型值 |
  | amount           | 数量           | 树枝节点数量                       |            |
  | split_angle      | 分裂_角度      | 树枝伸出方向与垂直方向角度         |            |
  | max_split_number | 最大_分裂_数量 | 每个树枝节点向不同方向分裂树枝数量 |            |
  | radius           | 半径           | 影响树枝底部粗细                   |            |
  | end_radius       | 尾部_半径      | 影响树枝端部粗细                   |            |
  | start            | 开始           | 从树干开始生长的位置               |            |
  | length           | 长度           | 树枝长度                           |            |
  | shape_start      | 形状_开始      | 底部树枝控制                       |            |
  | shape_end        | 形状_结束      | 顶部树枝控制                       |            |
  | shape_convexity  | 形状_种凸      | 中间树枝控制                       |            |
  | resolution       | 分辨率         | 影响树精度                         |            |
  | randomness       | 随机性         | 影响树卷曲程度                     |            |
  | split_proba      | 分裂_概率      | 树枝分形程度                       |            |
  | split_flatten    | 分裂_扁平化    | 树枝端部下落趋势                   |            |
  | gravity_strength | 重力_强度      | 树枝端部受重力影响                 |            |
  | floor_avoidance  | 地面避免       | 设置地面高度                       |            |

### 2.2 其他树节点
#### 生长节点
- 输入输出
  - 输入：树
  - 输出：树
- 可选项
  - can_spawn_leafs: 生成树叶
- 生长节点参数解析
  | 英文             | 中文        | 解释               | 备注       |
  | ---------------- | ----------- | ------------------ | ---------- |
  | seed             | 随机种      | 制作随机数         | 只有整型值 |
  | length           | 长度        | 生长长度           |            |
  | shape_start      | 形状_开始   | 底部树枝控制       |            |
  | shape_end        | 形状_结束   | 顶部树枝控制       |            |
  | shape_convexity  | 形状_种凸   | 中间树枝控制       |            |
  | resolution       | 分辨率      | 影响精度           |            |
  | randomness       | 随机性      | 影响卷曲程度       |            |
  | split_proba      | 分裂_概率   | 树枝分形程度       |            |
  | split_angle      | 分裂_角度   | 树枝分形方向       |            |
  | split_radius     | 分裂_半径   | 树枝分形数量       |            |
  | split_flatten    | 分裂_扁平化 | 树枝端部下落趋势   | 没整明白   |
  | end_radius       | 尾部_半径   | 影响树枝端部粗细   |            |
  | gravity_strength | 重力_强度   | 树枝端部受重力影响 |            |
  | floor_avoidance  | 地面避免    | 设置地面高度       |            |

#### 分离节点
- 输入输出
  - 输入：树
  - 输出：生长节点
- 分离节点参数解析
  | 英文             | 中文          | 解释                   | 备注       |
  | ---------------- | ------------- | ---------------------- | ---------- |
  | seed             | 随机种        | 制作随机数             | 只有整型值 |
  | amount           | 数量          | 分裂数量               |            |
  | split_angle      | 分裂角度      | 分形方向               |            |
  | max_split_number | 最大_分裂数量 | 同一树节处分支最大数量 |            |
  | radius           | 半径          | 没什么明显效果         |            |
  | start            | 开始          | 开始分离位置           |            |
  | end              | 末端          | 结束分离位置           |            |

### 控制与树叶节点
#### 树参数节点
- 输入输出
  - 此节点为控制节点，没有输入输出
- 控制参数
  - 创建树：生成树模型
  - 自动更新：略
  - 输出：最终/预览
  - 分辨率：仅在输出为最终时有效，控制精度
  - 创建叶
    | 英文             | 中文       | 解释                 | 备注     |
    | ---------------- | ---------- | -------------------- | -------- |
    | leaf_amount      | 叶数量     | 即叶子数量           |          |
    | leaf_max_radius  | 叶最大数量 |                      |          |
    | leaf             | 叶         | 指定叶模型           |          |
    | leaf_size        | 叶子尺寸   | 缩放叶子模型         |          |
    | extremities only | 仅末端     | 末端生长             |          |
    | leaf_weight      | 叶子重力   | 叶子受重力影响       |          |
    | leaf_spread      | 叶子拉伸   | 可以控制叶子生长方向 | 没搞明白 |
    | leaf_flatten     | 叶子扁平化 | 叶子角度             | 没搞明白 |
  - 创建骨骼
    - 略
  
#### 树叶节点
- 输入输出
  - 此节点为控制节点，没有输入输出
- 控制参数
  - 执行：创建树叶模型
- 树叶节点参数解析
  | 英文             | 中文      | 解释             | 备注       |
  | ---------------- | --------- | ---------------- | ---------- |
  | seed             | 随机种    | 制作随机数       | 只有整型值 |
  | length           | 长度      | 树叶与树枝间距   |            |
  | radius           | 半径      | 开始生成树叶位置 |            |
  | branch_number    | 分支_数量 | 树叶数量         |            |
  | randomness       | 随机性    | 卷曲程序         |            |
  | resolution       | 分辨率    | 精度             |            |
  | gravity_strength | 重力_强度 | 受重力影响       |            |
  | flatten          | 扁平化    | 扁平化           |            |
  | leaf type        | 树叶类型  | 预设或自定义     |            |
  | leaf_size        | 叶子_尺寸 | 叶子大小         | 无明显效果 |